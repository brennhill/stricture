# lineage-policy-strict.yml - Example strict lineage policy pack.
# Usage: cp docs/config-examples/lineage-policy-strict.yml .stricture-policy.yml
schema_version: 1
policy_id: strict:policy

lineage:
  require:
    field_keys:
      - owner
      - escalation
    source_query_keys:
      - contract_ref
    system_registry_keys:
      - escalation
      - escalation[].role
      - escalation[].name
      - escalation[].channel
      - runbook_url
      - doc_root
    override_keys:
      - ticket

  defaults:
    break_policy: strict
    data_classification: internal

  findings:
    require_downstream_impact: true
    unknown_impact_severity: low
    self_only:
      emit_finding: false
      publish_change_event: true
    flow_criticality:
      enabled: true
      level_direction: lower_is_more_critical
      fail_on_level: 1
      severity_by_level:
        "1": high
        "2": medium
      critical_flow_ids:
        - checkout
      critical_flow_block_reason: "Risk of order loss"

  severity_overrides:
    missing_required_key: high
    invalid_default_value: medium
    unknown_flow_id: medium

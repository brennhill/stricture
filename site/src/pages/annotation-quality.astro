---
import MainLayout from "../layouts/MainLayout.astro";
---

<MainLayout title="Annotation Quality" description="How to write clear, actionable annotations so Stricture findings stay understandable.">
  <section class="card">
    <p class="kicker">Guide</p>
    <h1>Annotation quality that keeps findings readable.</h1>
    <p class="lead">Better annotations → clearer findings → faster fixes. Use this checklist when tagging fields.</p>
    <ul>
      <li><strong>Field identity:</strong> `field` (or explicit `field_id`).</li>
      <li><strong>Producer:</strong> `source_system`.</li>
      <li><strong>Version:</strong> `source_version`.</li>
      <li><strong>Provenance:</strong> `sources` with contract refs (+ provider/as-of for external).</li>
      <li><strong>Everything else:</strong> defaulted by Stricture unless you need custom behavior.</li>
    </ul>
  </section>

  <section class="card">
    <h2>Good vs bad examples</h2>
    <ul>
      <li><strong>Type/size</strong>: Bad “number”; Good “uint8, range 0–255, unit=count”.</li>
      <li><strong>Enum</strong>: Bad missing cadence; Good lists values and warns PSP adds quarterly.</li>
      <li><strong>Ownership</strong>: Always include owner + escalation.</li>
      <li><strong>Freshness</strong>: External providers need as-of + max_staleness.</li>
    </ul>
  </section>

  <section class="card">
    <h2>Template</h2>
    <pre><code>field: response.payments.status
source_system: PaymentsGateway
source_version: v2026.04
sources: api:payments-core.GetStatus#response.status@cross_repo?contract_ref=git+https://github.com/acme/payments-core//openapi.yaml@v1.4.2
</code></pre>
    <p class="muted">Defaults fill owner/escalation, merge/transform policy, classification, contract test ID, flow, and note.</p>
  </section>

  <section class="card">
    <h2>When to block vs warn</h2>
    <ul>
      <li><strong>Block</strong>: type narrowing/widening that exceeds consumer limits, enum removals, missing owner/contract for regulated data.</li>
      <li><strong>Warn</strong>: additive enum, docs-only changes, optional fields with owners set.</li>
    </ul>
  </section>
</MainLayout>
